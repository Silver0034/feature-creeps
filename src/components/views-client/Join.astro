---
export const sortOrder = 1
const textButton = 'Join the game'

import RoomCode from '@components/RoomCode.astro'
import Button from '@components/Button.astro'
import Input from '@components/Input.astro'
---

<form id='joinRoom'>
	<RoomCode />
	<Input
		id='join-player-name'
		label="Enter your (creep's) name"
		maxlength='50'
		multiline
		name='playerName'
		preventLineBreaks
		shapes={['flag-left', 'flag-right']}
	/>
	<Button type='submit' text={textButton} />
</form>

<script>
	const form = document.getElementById('joinRoom') as HTMLFormElement

	const handleSubmit = (event: SubmitEvent) => {
		event.preventDefault()
		const formData = new FormData(form)
		const roomCode = formData.get('roomCode')
		const playerName = formData.get('playerName')

		console.log({ roomCode, playerName })

		// TODO! - Make the form do something
	}

	form.addEventListener('submit', handleSubmit)
</script>
