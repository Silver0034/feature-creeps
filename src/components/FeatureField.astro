---
const textLegend = 'Enter a new feature for your character.'
const maxFeatureLength = 50
---

<style>
	.featureField {
		--text-color: var(--color-text);
		--background-color: var(--color-background);
		--outline-color: var(--color-text);

		position: relative;
		display: block;
		border: none;
		outline: none;
		background: none;
		color: var(--text-color);
		font-family: var(--font-heading);
		padding: 0;
		cursor: pointer;
		margin: 0 auto;
		width: 100%;

		&:focus-within {
			--outline-color: var(--color-primary);
		}
	}

	label {
		margin-block: 1rem;
	}

	textarea {
		border: none;
		background: none;
		width: 100%;
		resize: vertical;
		outline: none;
		padding: 1em;
	}

	svg {
		position: absolute;
		inset: 0;
		height: 100%;
		width: 100%;
		stroke: var(--outline-color);
		stroke-width: 1px;
		fill: none;
		z-index: -1;
	}

	.lengthMessage {
		font-family: var(--font-body);
		font-size: var(--font-size-small);
		text-align: right;
		margin-top: 1em;
	}
</style>

<label>
	<div class='labels'>{textLegend}</div>
	<div class='featureField'>
		<textarea name='feature' maxlength={maxFeatureLength}></textarea>
		<svg
			viewBox='0 0 314 71'
			xmlns='http://www.w3.org/2000/svg'
			preserveAspectRatio='none'
		>
			<path
				d='M1.35068 64.6733C1.17804 65.6061 2.329 69.6082 6.05703 69.1604C10.7171 68.6007 30.9105 68.041 36.6061 69.1604C42.3017 70.2798 94.5976 70.2799 96.151 69.1604C97.7043 68.041 265.983 68.041 268.572 69.1604C271.161 70.2799 304.817 70.2799 307.923 69.1604C311.03 68.041 313.101 69.1604 312.583 62.4439C312.066 55.7274 313.74 47.6115 312.583 42.2943C311.893 39.1172 313.243 15.3358 312.583 12.6296C311.151 6.75259 314.137 1.99504 309.995 1.99504C305.852 1.99504 256.663 -0.243805 232.845 1.99504C209.027 4.23389 108.06 3.67418 98.7399 1.99504C89.4198 0.315906 12.7882 3.11446 8.64593 1.99504C4.50368 0.875618 1.28775 0.315909 1.91492 8.15187C2.6053 14.4953 3.57176 20.3468 1.91486 29.75C0.706834 36.6057 0.893341 42.1065 1.35062 48.5003'
				stroke-linecap='round'></path>
		</svg>
	</div>
	<p class='lengthMessage'>
		<span class='currentFeatureLength'>0</span> out of <span
			class='maxFeatureLength'>{maxFeatureLength}</span
		> characters
	</p>
</label>

<script>
	// Update the character count
	const input = document.querySelector(
		'input[name="feature"]'
	) as HTMLInputElement
	const currentFeatureLength = document.querySelector(
		'.currentNameLength'
	) as HTMLSpanElement

	input.addEventListener('input', () => {
		currentFeatureLength.textContent = String(input.value.length)
	})
</script>
